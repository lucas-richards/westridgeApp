{% extends "training/tabs_nav.html" %}
{% load crispy_forms_tags %}
{% block content %}

<!-- create two columns -->
<div class="row">
    <div class="col-md-4">
        <div class="mt-5 p-3 card ">
            <h4>Training By Year</h4>
            <canvas class="p-3" id="myChart"></canvas>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Year</th>
                        <th>Trainings</th>
                    </tr>
                </thead>
                <tbody>
                    {% for x,y in by_year1 %}
                    <tr>
                        <td>{{ x }}</td>
                        <td>{{ y }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="col-md-4">
        <div class="mt-5 p-3 card ">
            <h4>Training History</h4>
            <canvas class="p-3" id="myChart2"></canvas>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Less Than</th>
                        <th>People</th>
                    </tr>
                </thead>
                <tbody>
                    {% for x,y in history1 %}
                    <tr>
                        <td>{{ x }}</td>
                        <td>{{ y }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="col-md-4">
        <div class="mt-5 p-3 card ">
            <h4>Total Retraining</h4>
            <canvas class="p-3" id="myChart"></canvas>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Year</th>
                        <th>Trainings</th>
                    </tr>
                </thead>
                <tbody>
                    {% for x,y in by_year1 %}
                    <tr>
                        <td>{{ x }}</td>
                        <td>{{ y }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    
</div>
    


<!-- dynamic charts -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  const ctx = document.getElementById('myChart');

  new Chart(ctx, {
      type: 'pie',
      data: {
          labels: {{ by_year2.x }},
          datasets: [{
              label: 'Trainings',
              data: {{ by_year2.y }},
              borderWidth: 1,
              backgroundColor: ['rgba(54, 162, 235, 0.8)', 'rgba(54, 162, 235, 0.1)', 'rgba(54, 162, 235, 0.3)', 'rgba(54, 100, 235, 0.5)', 'rgba(54, 162, 235, 0.9)']
          }]
      },
      options: {
          plugins: {
              legend: {
                  display: false,
              },
              tooltip: {
                  enabled: true,
              }
          },
          scales: {
              x: {
                  display: false
              },
              y: {
                  display: false
              }
          }
      }
  });
</script>
<script>
  const ctx2 = document.getElementById('myChart2');

  new Chart(ctx2, {
      type: 'pie',
      data: {
          labels: ['1 Year', '2 Years', '5 Years', 'Others'],
          datasets: [{
              label: 'Trainings',
              data: {{ history2.y }},
              borderWidth: 1,
              backgroundColor: ['rgba(54, 162, 235, 0.8)', 'rgba(54, 162, 235, 0.1)', 'rgba(54, 162, 235, 0.3)', 'rgba(54, 100, 235, 0.5)', 'rgba(54, 162, 235, 0.9)']
          }]
      },
      options: {
          plugins: {
              legend: {
                  display: false,
              },
              tooltip: {
                  enabled: true,
              }
          },
          scales: {
              x: {
                  display: false
              },
              y: {
                  display: false
              }
          }
      }
  });
</script>


{% endblock content %}